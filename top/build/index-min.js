KISSY.add("kg/top/1.0.0/index",["node","base","anim"],function(e,t,o,n){{var i,s=t("node"),l=t("base");t("anim")}i=function(t){var o=s,n=o.all,i=l,r=i.extend({initializer:function(){var e=this,t=e.get("showPos");0===t&&n(window).on("resize",function(){e.set("showPos",n(window).height())})},_create:function(){var e=this,t=e.get("tpl"),o=n(t);return e.set("$target",o),n("body").append(o),o.on("click",function(t){t.preventDefault(),e.run()}),o},render:function(){var t=this,o=t.get("showPos"),i=t.get("$target");n(window).on("scroll",function(){console.log("$window.scrollTop:"+n(window).scrollTop()),n(window).scrollTop()>o?(i.length||(i=t._create()),e.later(function(){t.set("visible",!0)})):t.set("visible",!1)}),i.length&&i.on("click",function(e){e.preventDefault(),t.run()})},run:function(){var e=this,t=e.get("scrollSpeed");n("body").animate({scrollTop:0},t,"swing")}},{ATTRS:{$target:{value:"",getter:function(e){return n(e)}},showPos:{value:0,getter:function(e){return e>0?e:(console.log("$window.height:"+n(window).height()),n(window).height())}},tpl:{value:'<div class="J_Top goto-top"><div class="top-bg"></div><span class="vc-iconfont top-icon">&#xe600;</span></div>'},visible:{value:!1,setter:function(e){var t=this,o=t.get("$target"),n=t.get("showClass");return o[e&&"addClass"||"removeClass"](n),e}},scrollSpeed:{value:1},showClass:{value:"top-show"}}});return t=r}(),n.exports=i});